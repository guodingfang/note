<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>指南 | 技术笔记汇总</title>
    <meta name="description" content="技术笔记汇总">
    <link rel="icon" href="/note/logo.png">
    
    <link rel="preload" href="/note/assets/css/0.styles.723ec28c.css" as="style"><link rel="preload" href="/note/assets/js/app.639aaa1d.js" as="script"><link rel="preload" href="/note/assets/js/2.18cea2a3.js" as="script"><link rel="preload" href="/note/assets/js/16.9d49488e.js" as="script"><link rel="prefetch" href="/note/assets/js/10.d74c4aaa.js"><link rel="prefetch" href="/note/assets/js/100.160ef226.js"><link rel="prefetch" href="/note/assets/js/101.d89cfcb4.js"><link rel="prefetch" href="/note/assets/js/102.41543122.js"><link rel="prefetch" href="/note/assets/js/103.f46c5a54.js"><link rel="prefetch" href="/note/assets/js/104.8afda8d0.js"><link rel="prefetch" href="/note/assets/js/105.8b49f398.js"><link rel="prefetch" href="/note/assets/js/106.0a237536.js"><link rel="prefetch" href="/note/assets/js/107.fd156660.js"><link rel="prefetch" href="/note/assets/js/108.cec707fc.js"><link rel="prefetch" href="/note/assets/js/109.b08fc514.js"><link rel="prefetch" href="/note/assets/js/11.e7bbc63e.js"><link rel="prefetch" href="/note/assets/js/110.999289db.js"><link rel="prefetch" href="/note/assets/js/111.ec825371.js"><link rel="prefetch" href="/note/assets/js/112.63a9fae3.js"><link rel="prefetch" href="/note/assets/js/113.8d88e9c4.js"><link rel="prefetch" href="/note/assets/js/114.45aea35d.js"><link rel="prefetch" href="/note/assets/js/115.1a9e8d50.js"><link rel="prefetch" href="/note/assets/js/116.9e1366fe.js"><link rel="prefetch" href="/note/assets/js/117.aef7b2f8.js"><link rel="prefetch" href="/note/assets/js/118.d0894cfb.js"><link rel="prefetch" href="/note/assets/js/119.6f1a233e.js"><link rel="prefetch" href="/note/assets/js/12.4e2e5b55.js"><link rel="prefetch" href="/note/assets/js/120.9cb76c94.js"><link rel="prefetch" href="/note/assets/js/121.51db0e41.js"><link rel="prefetch" href="/note/assets/js/122.a774b6e0.js"><link rel="prefetch" href="/note/assets/js/123.2495f550.js"><link rel="prefetch" href="/note/assets/js/124.72a5001b.js"><link rel="prefetch" href="/note/assets/js/125.3002453d.js"><link rel="prefetch" href="/note/assets/js/126.a0580de3.js"><link rel="prefetch" href="/note/assets/js/127.b94a348d.js"><link rel="prefetch" href="/note/assets/js/128.19cb69b3.js"><link rel="prefetch" href="/note/assets/js/129.6694712d.js"><link rel="prefetch" href="/note/assets/js/13.bb2d73f3.js"><link rel="prefetch" href="/note/assets/js/130.36726bd4.js"><link rel="prefetch" href="/note/assets/js/131.99855906.js"><link rel="prefetch" href="/note/assets/js/132.a887285f.js"><link rel="prefetch" href="/note/assets/js/133.3331cbc8.js"><link rel="prefetch" href="/note/assets/js/134.50211f20.js"><link rel="prefetch" href="/note/assets/js/135.6db45b06.js"><link rel="prefetch" href="/note/assets/js/136.b6f8c569.js"><link rel="prefetch" href="/note/assets/js/137.32bae06b.js"><link rel="prefetch" href="/note/assets/js/138.9a0c4498.js"><link rel="prefetch" href="/note/assets/js/139.bc89350a.js"><link rel="prefetch" href="/note/assets/js/14.99e459f9.js"><link rel="prefetch" href="/note/assets/js/140.d470778d.js"><link rel="prefetch" href="/note/assets/js/141.0e78c0c6.js"><link rel="prefetch" href="/note/assets/js/142.24fd38c1.js"><link rel="prefetch" href="/note/assets/js/143.6b33397a.js"><link rel="prefetch" href="/note/assets/js/144.e541ff87.js"><link rel="prefetch" href="/note/assets/js/145.dfc7a5d1.js"><link rel="prefetch" href="/note/assets/js/146.b8f4d1c2.js"><link rel="prefetch" href="/note/assets/js/147.2fba978b.js"><link rel="prefetch" href="/note/assets/js/15.ebfb8f45.js"><link rel="prefetch" href="/note/assets/js/17.569ba4d1.js"><link rel="prefetch" href="/note/assets/js/18.c8798bfa.js"><link rel="prefetch" href="/note/assets/js/19.60f574a1.js"><link rel="prefetch" href="/note/assets/js/20.45207a90.js"><link rel="prefetch" href="/note/assets/js/21.a2904a46.js"><link rel="prefetch" href="/note/assets/js/22.efd74e56.js"><link rel="prefetch" href="/note/assets/js/23.126123a5.js"><link rel="prefetch" href="/note/assets/js/24.90d786b5.js"><link rel="prefetch" href="/note/assets/js/25.dfff9848.js"><link rel="prefetch" href="/note/assets/js/26.d4980a90.js"><link rel="prefetch" href="/note/assets/js/27.f265c0a3.js"><link rel="prefetch" href="/note/assets/js/28.0b4655c2.js"><link rel="prefetch" href="/note/assets/js/29.1c841b66.js"><link rel="prefetch" href="/note/assets/js/3.97ea9125.js"><link rel="prefetch" href="/note/assets/js/30.14fb0251.js"><link rel="prefetch" href="/note/assets/js/31.83ecbc44.js"><link rel="prefetch" href="/note/assets/js/32.676ceef2.js"><link rel="prefetch" href="/note/assets/js/33.dd1928f3.js"><link rel="prefetch" href="/note/assets/js/34.e4f8b59e.js"><link rel="prefetch" href="/note/assets/js/35.c34ce175.js"><link rel="prefetch" href="/note/assets/js/36.34ac0299.js"><link rel="prefetch" href="/note/assets/js/37.835c49dc.js"><link rel="prefetch" href="/note/assets/js/38.7b2a15c1.js"><link rel="prefetch" href="/note/assets/js/39.b323af2f.js"><link rel="prefetch" href="/note/assets/js/4.c8fd7a8d.js"><link rel="prefetch" href="/note/assets/js/40.e2a077a4.js"><link rel="prefetch" href="/note/assets/js/41.24bd3142.js"><link rel="prefetch" href="/note/assets/js/42.32054c08.js"><link rel="prefetch" href="/note/assets/js/43.f692f1af.js"><link rel="prefetch" href="/note/assets/js/44.cbafa45a.js"><link rel="prefetch" href="/note/assets/js/45.c4abea6a.js"><link rel="prefetch" href="/note/assets/js/46.1f70a305.js"><link rel="prefetch" href="/note/assets/js/47.5e6582ef.js"><link rel="prefetch" href="/note/assets/js/48.27b2112e.js"><link rel="prefetch" href="/note/assets/js/49.3fc1c54b.js"><link rel="prefetch" href="/note/assets/js/5.e0fe9c1d.js"><link rel="prefetch" href="/note/assets/js/50.f6773725.js"><link rel="prefetch" href="/note/assets/js/51.cb2d49b0.js"><link rel="prefetch" href="/note/assets/js/52.0cb675fa.js"><link rel="prefetch" href="/note/assets/js/53.0a7d1250.js"><link rel="prefetch" href="/note/assets/js/54.a2207b8d.js"><link rel="prefetch" href="/note/assets/js/55.b62860f5.js"><link rel="prefetch" href="/note/assets/js/56.4643e80f.js"><link rel="prefetch" href="/note/assets/js/57.79f29367.js"><link rel="prefetch" href="/note/assets/js/58.499d1cc9.js"><link rel="prefetch" href="/note/assets/js/59.6a110758.js"><link rel="prefetch" href="/note/assets/js/6.26ae280a.js"><link rel="prefetch" href="/note/assets/js/60.220d416e.js"><link rel="prefetch" href="/note/assets/js/61.e6ae8610.js"><link rel="prefetch" href="/note/assets/js/62.450a8b23.js"><link rel="prefetch" href="/note/assets/js/63.238bc8af.js"><link rel="prefetch" href="/note/assets/js/64.c556d7a5.js"><link rel="prefetch" href="/note/assets/js/65.0b2b8f74.js"><link rel="prefetch" href="/note/assets/js/66.8d38ac9a.js"><link rel="prefetch" href="/note/assets/js/67.713c7ae8.js"><link rel="prefetch" href="/note/assets/js/68.9de919ca.js"><link rel="prefetch" href="/note/assets/js/69.2592d868.js"><link rel="prefetch" href="/note/assets/js/7.bb118cfd.js"><link rel="prefetch" href="/note/assets/js/70.0466fd46.js"><link rel="prefetch" href="/note/assets/js/71.a00608d4.js"><link rel="prefetch" href="/note/assets/js/72.1bcabb0f.js"><link rel="prefetch" href="/note/assets/js/73.78366d6d.js"><link rel="prefetch" href="/note/assets/js/74.51084859.js"><link rel="prefetch" href="/note/assets/js/75.85681aa6.js"><link rel="prefetch" href="/note/assets/js/76.c6c9f004.js"><link rel="prefetch" href="/note/assets/js/77.868c406f.js"><link rel="prefetch" href="/note/assets/js/78.bd98c817.js"><link rel="prefetch" href="/note/assets/js/79.823c967e.js"><link rel="prefetch" href="/note/assets/js/8.8d8d5490.js"><link rel="prefetch" href="/note/assets/js/80.7e38de0b.js"><link rel="prefetch" href="/note/assets/js/81.f4ee7ab9.js"><link rel="prefetch" href="/note/assets/js/82.2bddefbf.js"><link rel="prefetch" href="/note/assets/js/83.1ab0c706.js"><link rel="prefetch" href="/note/assets/js/84.e6725b2a.js"><link rel="prefetch" href="/note/assets/js/85.637004f2.js"><link rel="prefetch" href="/note/assets/js/86.df5d585f.js"><link rel="prefetch" href="/note/assets/js/87.6264f320.js"><link rel="prefetch" href="/note/assets/js/88.e54ffe1f.js"><link rel="prefetch" href="/note/assets/js/89.84627f4a.js"><link rel="prefetch" href="/note/assets/js/9.eb9999aa.js"><link rel="prefetch" href="/note/assets/js/90.06375289.js"><link rel="prefetch" href="/note/assets/js/91.baa716db.js"><link rel="prefetch" href="/note/assets/js/92.471de1da.js"><link rel="prefetch" href="/note/assets/js/93.853cd704.js"><link rel="prefetch" href="/note/assets/js/94.9ccee478.js"><link rel="prefetch" href="/note/assets/js/95.6ce9b4cf.js"><link rel="prefetch" href="/note/assets/js/96.75494f51.js"><link rel="prefetch" href="/note/assets/js/97.df197e36.js"><link rel="prefetch" href="/note/assets/js/98.cbab8cf8.js"><link rel="prefetch" href="/note/assets/js/99.906477ea.js">
    <link rel="stylesheet" href="/note/assets/css/0.styles.723ec28c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/note/" class="home-link router-link-active"><!----> <span class="site-name">技术笔记汇总</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">技术笔记</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/base/" class="nav-link">基础</a></li><li class="dropdown-item"><h4>进阶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/typescript/" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/note/regex/" class="nav-link">正则表达式</a></li></ul></li><li class="dropdown-item"><h4>框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/react/" class="nav-link">React</a></li><li class="dropdown-subitem"><a href="/note/vue/" class="nav-link">Vue</a></li></ul></li><li class="dropdown-item"><h4>微信开发</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/wx_official_account/" class="nav-link">微信公众号</a></li><li class="dropdown-subitem"><a href="/note/wx_mini_program/" class="nav-link">微信小程序</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端工程</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/sass/" class="nav-link">Sass</a></li><li class="dropdown-item"><!----> <a href="/note/less/" class="nav-link">Less</a></li><li class="dropdown-item"><!----> <a href="/note/gulp/" class="nav-link">Gulp</a></li><li class="dropdown-item"><!----> <a href="/note/npm/" class="nav-link">Npm</a></li><li class="dropdown-item"><!----> <a href="/note/webpack/" class="nav-link">Webpack</a></li><li class="dropdown-item"><!----> <a href="/note/babel/" class="nav-link">Babel</a></li><li class="dropdown-item"><!----> <a href="/note/git/" class="nav-link">Git</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">nodejs开发</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/nodejs/" class="nav-link">NodeJs</a></li><li class="dropdown-item"><!----> <a href="/note/koa2/" class="nav-link">Koa2</a></li><li class="dropdown-item"><!----> <a href="/note/express/" class="nav-link">Express</a></li><li class="dropdown-item"><!----> <a href="/note/mongodb/" class="nav-link">MongoDB</a></li><li class="dropdown-item"><!----> <a href="/note/redis/" class="nav-link">Redis</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">应用框架</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/ant_design_pro/" class="nav-link router-link-active">Ant Design Pro</a></li><li class="dropdown-item"><!----> <a href="/note/react_native/" class="nav-link">React Native</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/note/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">技术笔记</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/base/" class="nav-link">基础</a></li><li class="dropdown-item"><h4>进阶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/typescript/" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/note/regex/" class="nav-link">正则表达式</a></li></ul></li><li class="dropdown-item"><h4>框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/react/" class="nav-link">React</a></li><li class="dropdown-subitem"><a href="/note/vue/" class="nav-link">Vue</a></li></ul></li><li class="dropdown-item"><h4>微信开发</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/wx_official_account/" class="nav-link">微信公众号</a></li><li class="dropdown-subitem"><a href="/note/wx_mini_program/" class="nav-link">微信小程序</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端工程</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/sass/" class="nav-link">Sass</a></li><li class="dropdown-item"><!----> <a href="/note/less/" class="nav-link">Less</a></li><li class="dropdown-item"><!----> <a href="/note/gulp/" class="nav-link">Gulp</a></li><li class="dropdown-item"><!----> <a href="/note/npm/" class="nav-link">Npm</a></li><li class="dropdown-item"><!----> <a href="/note/webpack/" class="nav-link">Webpack</a></li><li class="dropdown-item"><!----> <a href="/note/babel/" class="nav-link">Babel</a></li><li class="dropdown-item"><!----> <a href="/note/git/" class="nav-link">Git</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">nodejs开发</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/nodejs/" class="nav-link">NodeJs</a></li><li class="dropdown-item"><!----> <a href="/note/koa2/" class="nav-link">Koa2</a></li><li class="dropdown-item"><!----> <a href="/note/express/" class="nav-link">Express</a></li><li class="dropdown-item"><!----> <a href="/note/mongodb/" class="nav-link">MongoDB</a></li><li class="dropdown-item"><!----> <a href="/note/redis/" class="nav-link">Redis</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">应用框架</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/ant_design_pro/" class="nav-link router-link-active">Ant Design Pro</a></li><li class="dropdown-item"><!----> <a href="/note/react_native/" class="nav-link">React Native</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/note/ant_design_pro/" class="sidebar-link">说明</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>UmiJS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note/ant_design_pro/umijs/guide.html" class="active sidebar-link">指南</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/ant_design_pro/umijs/guide.html#介绍" class="sidebar-link">介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/ant_design_pro/umijs/guide.html#特性" class="sidebar-link">特性</a></li><li class="sidebar-sub-header"><a href="/note/ant_design_pro/umijs/guide.html#框架" class="sidebar-link">框架</a></li><li class="sidebar-sub-header"><a href="/note/ant_design_pro/umijs/guide.html#从源码到上线的生命周期管理" class="sidebar-link">从源码到上线的生命周期管理</a></li><li class="sidebar-sub-header"><a href="/note/ant_design_pro/umijs/guide.html#与-dva、roadhog-之间的关系？" class="sidebar-link">与 dva、roadhog 之间的关系？</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/ant_design_pro/umijs/guide.html#快速上手" class="sidebar-link">快速上手</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/ant_design_pro/umijs/guide.html#环境准备" class="sidebar-link">环境准备</a></li><li class="sidebar-sub-header"><a href="/note/ant_design_pro/umijs/guide.html#脚手架" class="sidebar-link">脚手架</a></li><li class="sidebar-sub-header"><a href="/note/ant_design_pro/umijs/guide.html#约定式路由" class="sidebar-link">约定式路由</a></li><li class="sidebar-sub-header"><a href="/note/ant_design_pro/umijs/guide.html#部署发布" class="sidebar-link">部署发布</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/ant_design_pro/umijs/guide.html#通过脚手架创建项目" class="sidebar-link">通过脚手架创建项目</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/ant_design_pro/umijs/guide.html#创建项目" class="sidebar-link">创建项目</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/ant_design_pro/umijs/guide.html#目录及约定" class="sidebar-link">目录及约定</a></li><li class="sidebar-sub-header"><a href="/note/ant_design_pro/umijs/guide.html#路由" class="sidebar-link">路由</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/ant_design_pro/umijs/guide.html#约定路由" class="sidebar-link">约定路由</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/ant_design_pro/umijs/guide.html#在页面间跳转" class="sidebar-link">在页面间跳转</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/ant_design_pro/umijs/guide.html#声明式" class="sidebar-link">声明式</a></li><li class="sidebar-sub-header"><a href="/note/ant_design_pro/umijs/guide.html#命令式" class="sidebar-link">命令式</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/ant_design_pro/umijs/guide.html#配置" class="sidebar-link">配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/ant_design_pro/umijs/guide.html#配置文件" class="sidebar-link">配置文件</a></li><li class="sidebar-sub-header"><a href="/note/ant_design_pro/umijs/guide.html#umi-env" class="sidebar-link">UMI_ENV</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/ant_design_pro/umijs/guide.html#html模板" class="sidebar-link">HTML模板</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/ant_design_pro/umijs/guide.html#修改默认模板" class="sidebar-link">修改默认模板</a></li><li class="sidebar-sub-header"><a href="/note/ant_design_pro/umijs/guide.html#配置模板" class="sidebar-link">配置模板</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/ant_design_pro/umijs/guide.html#module-processor" class="sidebar-link">Module Processor</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/ant_design_pro/umijs/guide.html#module-list" class="sidebar-link">Module list</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/ant_design_pro/umijs/guide.html#介绍-umi-ui" class="sidebar-link">介绍 Umi UI</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/ant_design_pro/umijs/guide.html#特性-2" class="sidebar-link">特性</a></li><li class="sidebar-sub-header"><a href="/note/ant_design_pro/umijs/guide.html#使用" class="sidebar-link">使用</a></li></ul></li></ul></li><li><a href="/note/ant_design_pro/umijs/advanced.html" class="sidebar-link">进阶</a></li><li><a href="/note/ant_design_pro/umijs/config.html" class="sidebar-link">配置</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>DvaJS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note/ant_design_pro/dvajs/guide.html" class="sidebar-link">指南</a></li><li><a href="/note/ant_design_pro/dvajs/beginner.html" class="sidebar-link">入门</a></li><li><a href="/note/ant_design_pro/dvajs/api.html" class="sidebar-link">API</a></li><li><a href="/note/ant_design_pro/dvajs/knowledge.html" class="sidebar-link">知识地图</a></li></ul></section></li><li><a href="/note/ant_design_pro/g2/" class="sidebar-link">G2</a></li><li><a href="/note/ant_design_pro/antd/" class="sidebar-link">Ant Design</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="指南"><a href="#指南" aria-hidden="true" class="header-anchor">#</a> 指南</h1> <h2 id="介绍"><a href="#介绍" aria-hidden="true" class="header-anchor">#</a> 介绍</h2> <p>umi（乌米），是一个可插拔的企业级 react 应用框架。umi 以路由为基础的，支持类 next.js 的约定式路由，以及各种进阶的路由功能，并以此进行功能的扩展，比如支持路由级的按需加载。<a href="https://umijs.org/zh/" target="_blank" rel="noopener noreferrer">详情<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="特性"><a href="#特性" aria-hidden="true" class="header-anchor">#</a> 特性</h3> <ul><li>开箱即用，内置 react，react-router 等</li> <li>类 next.js 且功能完备的路由约定，同时支持配置的路由方式</li> <li>完善的插件体系，覆盖从源码到构建产物的每个生命周期</li> <li>高性能，通过插件支持 PWA、以路由为单元的 code splitting 等</li> <li>支持静态页面导出，配置各种环境，比如中台业务、无线业务、egg等</li> <li>开发启动快，支持一键开启dll等</li> <li>兼容I9，基于 umi-plugin-polyfills</li> <li>完善的 TypeScript 支持，包括 d.ts 定义和 umi test</li> <li>与dva数据流的深入融合，支持 duck directory、model 的自动加载、code splitting等等</li></ul> <h3 id="框架"><a href="#框架" aria-hidden="true" class="header-anchor">#</a> 框架</h3> <p>下图是 umi 的架构图。</p> <p><img src="/note/assets/img/umijs.6e4bf7ea.png" alt="UmiJS架构图"></p> <h3 id="从源码到上线的生命周期管理"><a href="#从源码到上线的生命周期管理" aria-hidden="true" class="header-anchor">#</a> 从源码到上线的生命周期管理</h3> <p>市面上的框架基本都是从源码到构建产物，很少会考虑到各种发布流程，而 umi 则多走了这一步。
下图是 umi 从源码到线上的一个流程。</p> <p><img src="/note/assets/img/umijs-lifecycle.f40bc3a3.png" alt="UmiJS从源码到上线的生命周期管理"></p> <p>umi 首先会加载用户的配置和插件，然后基于配置或者目录，生成一份路由配置，再基于此路由配置，把 JS/CSS 源码和 HTML 完整的串联起来。用户配置的参数和插件会影响流程里的每个环节。</p> <h3 id="与-dva、roadhog-之间的关系？"><a href="#与-dva、roadhog-之间的关系？" aria-hidden="true" class="header-anchor">#</a> 与 dva、roadhog 之间的关系？</h3> <ul><li>roadhog 是基于 webpack 的封装工具，目的是简化webpack的配置</li> <li>umi 可以简单的理解为 roadhog + 路由，思路类似 next.js/nuxt.js ，辅以一套插件机制，目的是通过框架的方式简化 React 开发</li> <li>dva 目前是纯粹的数据流，和 umi 以及 roadhog 之间并没有相互的依赖关系，可以分开使用也可以一起使用</li></ul> <h2 id="快速上手"><a href="#快速上手" aria-hidden="true" class="header-anchor">#</a> 快速上手</h2> <h3 id="环境准备"><a href="#环境准备" aria-hidden="true" class="header-anchor">#</a> 环境准备</h3> <p>首先得有 node ，并确保 node 版本是8.10或以上</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ node -v
<span class="token number">8</span>.1x
</code></pre></div><p>推荐使用 yarn 管理 npm 依赖，并使用国内源</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 国内源</span>
$ <span class="token function">npm</span> i <span class="token function">yarn</span> tyarn -g
<span class="token comment"># 后面文档里的 yarn 换成 tyarn</span>
$ tyarn -v

<span class="token comment"># 阿里内网源</span>
$ tnpm i <span class="token function">yarn</span> @ali/yarn -g
<span class="token comment"># 后面文档里的 yarn 换成 ayarn</span>
$ ayarn -v
</code></pre></div><p>然后全局安装 umi ，确保版本是2.0.0或以上。</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">yarn</span> global <span class="token function">add</span> umi
$ umi -v
<span class="token number">2.0</span>.0
</code></pre></div><h3 id="脚手架"><a href="#脚手架" aria-hidden="true" class="header-anchor">#</a> 脚手架</h3> <p>新建一个空的目录</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">mkdir</span> myapp <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> myapp
</code></pre></div><p>然后通过 umi g 创建一些页面</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ umi g page index
$ umi g page <span class="token function">users</span>
</code></pre></div><p>这里的page目录是页面所在的目录，umi 约定默认情况下pages下所有的js文件即路由</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ umi dev
</code></pre></div><h3 id="约定式路由"><a href="#约定式路由" aria-hidden="true" class="header-anchor">#</a> 约定式路由</h3> <p>启动 <code>umi dev</code> 后，会发现 pages 下多了个 <code>.umi</code> 的目录。这是 umi 的临时目录，可以在这里做一些验证，但不要在这里修改代码，umi 重启或者 pages 下的文件修改都会重新生成这个文件夹下的文件。</p> <p>先修改 <code>pages/index.js</code></p> <div class="language-tsx extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-tsx"><code><span class="token keyword">import</span> Link <span class="token keyword">from</span> <span class="token string">'umi/link'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">'./index.css'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>normal<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Page index</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/users<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">go to /users</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在修改 <code>pages/users.js</code></p> <div class="language-tsx extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-tsx"><code><span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'umi/router'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">'./index.css'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>normal<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Page index</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> router<span class="token punctuation">.</span><span class="token function">goBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">go back</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>就可以在 index 和 users 两个页面之间路由跳转了</p> <h3 id="部署发布"><a href="#部署发布" aria-hidden="true" class="header-anchor">#</a> 部署发布</h3> <h4 id="构建"><a href="#构建" aria-hidden="true" class="header-anchor">#</a> 构建</h4> <p>执行 <code>umi build</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ umi build

DONE  Compiled successfully <span class="token keyword">in</span> 1729ms

File sizes after gzip:

  <span class="token number">68.04</span> KB  dist/umi.js
  <span class="token number">83</span> B      dist/umi.css
</code></pre></div><p>构建产物默认生成到 <code>./dist</code> 下</p> <h4 id="本地验证"><a href="#本地验证" aria-hidden="true" class="header-anchor">#</a> 本地验证</h4> <p>发布之前，可以通过 <code>sever</code> 做本地验证</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">yarn</span> global <span class="token function">add</span> serve
$ serve ./dist

Serving<span class="token operator">!</span>

- Local:            http://localhost:5000
- On Your Network:  http://<span class="token punctuation">{</span>Your IP<span class="token punctuation">}</span>:5000

Copied <span class="token builtin class-name">local</span> address to clipboard<span class="token operator">!</span>
</code></pre></div><p>访问http://localhost:5000，正常情况下应该和 <code>umi dev</code> 一致的。</p> <h4 id="部署"><a href="#部署" aria-hidden="true" class="header-anchor">#</a> 部署</h4> <p>本地验证完，就可以部署了，通过 <a href="https://zeit.co/home" target="_blank" rel="noopener noreferrer">now<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 来做演示</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">yarn</span> global <span class="token function">add</span> now
$ now ./dist

<span class="token operator">&gt;</span> Deploying /private/tmp/sorrycc-1KVCmK/dist under chencheng
<span class="token operator">&gt;</span> Synced <span class="token number">3</span> files <span class="token punctuation">(</span><span class="token number">301</span>.93KB<span class="token punctuation">)</span> <span class="token punctuation">[</span>2s<span class="token punctuation">]</span>
<span class="token operator">&gt;</span> https://dist-jtckzjjatx.now.sh <span class="token punctuation">[</span>in clipboard<span class="token punctuation">]</span> <span class="token punctuation">[</span>1s<span class="token punctuation">]</span>
<span class="token operator">&gt;</span> Deployment complete<span class="token operator">!</span>
</code></pre></div><h4 id="测试"><a href="#测试" aria-hidden="true" class="header-anchor">#</a> 测试</h4> <p>umi 内置了基于 <code>jest</code> 的测试工具 umi-test:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ umi <span class="token builtin class-name">test</span>

Options:

    --coverage                    indicates that <span class="token builtin class-name">test</span> coverage information should be collected and reported <span class="token keyword">in</span> the output
    --collectCoverageFrom<span class="token operator">=</span><span class="token operator">&lt;</span>glob<span class="token operator">&gt;</span>  a glob pattern relative to matching the files that coverage info needs to be collected from, e.g, --collectCoverageFrom<span class="token operator">=</span>src/**/*.js
    --detectLeaks                 debug memory leaks
</code></pre></div><h4 id="配置检查"><a href="#配置检查" aria-hidden="true" class="header-anchor">#</a> 配置检查</h4> <p>使用 umi inspect 列出配置项的内容用以检查：</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ umi inspect

Options:

    --mode                specify <span class="token function">env</span> mode <span class="token punctuation">(</span>development or production, default is development<span class="token punctuation">)</span>
    --rule <span class="token operator">&lt;</span>ruleName<span class="token operator">&gt;</span>     inspect a specific module rule
    --plugin <span class="token operator">&lt;</span>pluginName<span class="token operator">&gt;</span> inspect a specific plugin
    --rules               list all module rule names
    --plugins             list all plugin names
    --verbose             show full <span class="token keyword">function</span> definitions <span class="token keyword">in</span> output
</code></pre></div><h2 id="通过脚手架创建项目"><a href="#通过脚手架创建项目" aria-hidden="true" class="header-anchor">#</a> 通过脚手架创建项目</h2> <p>umi通过 create-umi 提供脚手架能力，包含：</p> <ul><li>project，通用项目脚手架，支持选择是否开启TypeScript，以及 umi-plugin-react 包含的功能</li> <li>ant-design-pro，仅包含 ant-design-pro 布局的脚手架，具体页面可通过 umi block 添加</li> <li>block，区块脚手架</li> <li>plugin，插件脚手架</li> <li>library，依赖（组件）库脚手架</li></ul> <h3 id="创建项目"><a href="#创建项目" aria-hidden="true" class="header-anchor">#</a> 创建项目</h3> <blockquote><p>可以通过 <code>yarn create umi</code> 或 <code>npm create umi</code> 使用 create-umi。推荐使用 <code>yarn create</code> 命令，确保每次使用最新的脚手架。</p></blockquote> <p>在新目录下使用 <code>yarn create umi</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">mkdir</span> myapp <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> myapp
$ <span class="token function">yarn</span> create umi
</code></pre></div><p>创建项目的剩余内容，点击查看<a href="https://umijs.org/zh/guide/create-umi-app.html#%E5%88%9B%E5%BB%BA-umi-%E9%A1%B9%E7%9B%AE" target="_blank" rel="noopener noreferrer">其余详情<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="目录及约定"><a href="#目录及约定" aria-hidden="true" class="header-anchor">#</a> 目录及约定</h2> <p>在文件和目录下，umi更倾向于选择约定的方式</p> <p>一个复杂应用的目录结构如下：</p> <div class="language- extra-class"><pre class="language-text"><code>.
├── dist/                          // 默认的 build 输出目录
├── mock/                          // mock 文件所在目录，基于 express
├── config/
    ├── config.js                  // umi 配置，同 .umirc.js，二选一
└── src/                           // 源码目录，可选
    ├── layouts/index.js           // 全局布局
    ├── pages/                     // 页面目录，里面的文件即路由
        ├── .umi/                  // dev 临时目录，需添加到 .gitignore
        ├── .umi-production/       // build 临时目录，会自动删除
        ├── document.ejs           // HTML 模板
        ├── 404.js                 // 404 页面
        ├── page1.js               // 页面 1，任意命名，导出 react 组件
        ├── page1.test.js          // 用例文件，umi test 会匹配所有 .test.js 和 .e2e.js 结尾的文件
        └── page2.js               // 页面 2，任意命名
    ├── global.css                 // 约定的全局样式文件，自动引入，也可以用 global.less
    ├── global.js                  // 可以在这里加入 polyfill
    ├── app.js                     // 运行时配置文件
├── .umirc.js                      // umi 配置，同 config/config.js，二选一
├── .env                           // 环境变量
└── package.json
</code></pre></div><p>目录及约定剩余内容，点击查看<a href="https://umijs.org/zh/guide/app-structure.html#es6-%E8%AF%AD%E6%B3%95" target="_blank" rel="noopener noreferrer">其余详情<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="路由"><a href="#路由" aria-hidden="true" class="header-anchor">#</a> 路由</h2> <p>umi 会根据 <code>pages</code> 目录自动生成路由配置</p> <h3 id="约定路由"><a href="#约定路由" aria-hidden="true" class="header-anchor">#</a> 约定路由</h3> <h4 id="基础路由"><a href="#基础路由" aria-hidden="true" class="header-anchor">#</a> 基础路由</h4> <p>假设 <code>pages</code> 目录结构如下：</p> <div class="language- extra-class"><pre class="language-text"><code>+ pages/
  + users/
    - index.js
    - list.js
  - index.js
</code></pre></div><p>那么，umi 会自动生成路由配置如下：</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span> component<span class="token punctuation">:</span> <span class="token string">'./pages/index.js'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/users/'</span><span class="token punctuation">,</span> component<span class="token punctuation">:</span> <span class="token string">'./pages/users/index.js'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/users/list'</span><span class="token punctuation">,</span> component<span class="token punctuation">:</span> <span class="token string">'./pages/users/list.js'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><h4 id="动态路由"><a href="#动态路由" aria-hidden="true" class="header-anchor">#</a> 动态路由</h4> <p>umi 里约定，带 <code>$</code> 前缀的目录或文件为动态路由</p> <div class="language- extra-class"><pre class="language-text"><code>+ pages/
  + $post/
    - index.js
    - comments.js
  + users/
    $id.js
  - index.js
</code></pre></div><p>会自动生成路由配置如下：</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span> component<span class="token punctuation">:</span> <span class="token string">'./pages/index.js'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/users/:id'</span><span class="token punctuation">,</span> component<span class="token punctuation">:</span> <span class="token string">'./pages/users/$id.js'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/:post/'</span><span class="token punctuation">,</span> component<span class="token punctuation">:</span> <span class="token string">'./pages/$post/index.js'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/:post/comments'</span><span class="token punctuation">,</span> component<span class="token punctuation">:</span> <span class="token string">'./pages/$post/comments.js'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><p>路由剩余信息，点击查看<a href="https://umijs.org/zh/guide/router.html#%E7%BA%A6%E5%AE%9A%E5%BC%8F%E8%B7%AF%E7%94%B1" target="_blank" rel="noopener noreferrer">其余详情<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="在页面间跳转"><a href="#在页面间跳转" aria-hidden="true" class="header-anchor">#</a> 在页面间跳转</h2> <p>在 umi 里，页面之间跳转的两种方式：声明式和命令式</p> <h3 id="声明式"><a href="#声明式" aria-hidden="true" class="header-anchor">#</a> 声明式</h3> <p>基于 <code>umi/link</code> ，通常作为 React 组件使用。</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> Link <span class="token keyword">from</span> <span class="token string">'umi/link'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Go to list page</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="命令式"><a href="#命令式" aria-hidden="true" class="header-anchor">#</a> 命令式</h3> <p>基于 <code>umi/router</code> ，通常在事件处理中被调用。</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'umi/router'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">goToListPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/list'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="配置"><a href="#配置" aria-hidden="true" class="header-anchor">#</a> 配置</h2> <h3 id="配置文件"><a href="#配置文件" aria-hidden="true" class="header-anchor">#</a> 配置文件</h3> <p>umi 允许在 <code>.umirc.js</code> 或 <code>config/config.js</code> （二选一，<code>.umirc.js</code> 优先）中进行配置，支持 ES6 语法。</p> <p>比如：</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  base<span class="token punctuation">:</span> <span class="token string">'/admin/'</span><span class="token punctuation">,</span>
  publicPath<span class="token punctuation">:</span> <span class="token string">'http://cdn.com/foo'</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">'umi-plugin-react'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      dva<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>具体配置项详见<a href="https://umijs.org/zh/config/" target="_blank" rel="noopener noreferrer">配置<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="umi-env"><a href="#umi-env" aria-hidden="true" class="header-anchor">#</a> UMI_ENV</h3> <p>可以通过环境变量 <code>UMI_ENV</code> 区分不同环境来指定配置</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token comment">// .umirc.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// .umirc.cloud.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span> b<span class="token punctuation">:</span> <span class="token string">'cloud'</span><span class="token punctuation">,</span> c<span class="token punctuation">:</span> <span class="token string">'cloud'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// .umirc.local.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span> c<span class="token punctuation">:</span> <span class="token string">'local'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>不指定 <code>UMI_ENV</code> 时，拿到的配置是：</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token punctuation">{</span>
  a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  b<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  c<span class="token punctuation">:</span> <span class="token string">'local'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>指定 <code>UMI_ENV=cloud</code> 时，拿到的配置是：</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token punctuation">{</span>
  a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  b<span class="token punctuation">:</span> <span class="token string">'cloud'</span><span class="token punctuation">,</span>
  c<span class="token punctuation">:</span> <span class="token string">'local'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="html模板"><a href="#html模板" aria-hidden="true" class="header-anchor">#</a> HTML模板</h2> <h3 id="修改默认模板"><a href="#修改默认模板" aria-hidden="true" class="header-anchor">#</a> 修改默认模板</h3> <p>新建 <code>src/pages/document.ejs</code> , umi约定如果这个文件存在，会作为默认模板，内容上需要保证有 <code>&lt;div id=&quot;root&quot;&gt;&lt;/div&gt;</code> ， 比如：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!doctype html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Your App<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="配置模板"><a href="#配置模板" aria-hidden="true" class="header-anchor">#</a> 配置模板</h3> <p>模板里可以通过 <code>context</code> 来获取 umi 提供的变量，context 包含：</p> <ul><li><code>route</code>，路由对象，包含 path、component 等</li> <li><code>config</code>，用户配置信息</li> <li><code>publicPath</code>，webpack 的 <code>output.publicPath</code> 配置</li> <li><code>env</code> 环境变量，值为 development 或 production</li> <li>其他在路由上通过 context 扩展的配置信息</li></ul> <p>剩余配置模板内容<a href="https://umijs.org/zh/guide/html-template.html#%E4%BF%AE%E6%94%B9%E9%BB%98%E8%AE%A4%E6%A8%A1%E6%9D%BF" target="_blank" rel="noopener noreferrer">详情<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="module-processor"><a href="#module-processor" aria-hidden="true" class="header-anchor">#</a> Module Processor</h2> <p>如下列出的模块在 <code>umi</code> 中都会被自动处理，所以开发者无需关心这些模块是如何被处理的，以及他们的 <code>webpack</code> 配置是怎样的</p> <h3 id="module-list"><a href="#module-list" aria-hidden="true" class="header-anchor">#</a> Module list</h3> <ul><li><code>.js, .jsx, .mjs, .jsx, .json</code>：由 babel-loader 处理</li> <li><code>.ts</code>：由 ts-loader 处理</li> <li><code>.graphql, .gql</code>：由 graphql-tag/loader 处理</li> <li><code>.css, .less, .sass</code>：由 css-loader, postcss-loader, less-loader 处理</li> <li><code>.svg</code>：由 @svgr/core 处理。使用 umi，可以用如下方式引入 svg</li></ul> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ReactComponent <span class="token keyword">as</span> Avatar <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./avatar.svg'</span>

<span class="token keyword">function</span> <span class="token function">Example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Avatar</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="介绍-umi-ui"><a href="#介绍-umi-ui" aria-hidden="true" class="header-anchor">#</a> 介绍 Umi UI</h2> <p>umi 项目的本地研发工作台</p> <h3 id="特性-2"><a href="#特性-2" aria-hidden="true" class="header-anchor">#</a> 特性</h3> <ul><li>项目管理。集中式管理本地项目。</li> <li>配置管理。umi / bigfish 常用项目配置。</li> <li>任务管理。集成启动、构建、测试、代码规范检查、重新安装依赖等常用操作。</li></ul> <h3 id="使用"><a href="#使用" aria-hidden="true" class="header-anchor">#</a> 使用</h3> <blockquote><p>请确保 umi 版本在 2.9.0 或以上</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code>$ umi ui
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/note/ant_design_pro/" class="prev router-link-active">说明</a></span> <span class="next"><a href="/note/ant_design_pro/umijs/advanced.html">进阶</a>→
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/note/assets/js/app.639aaa1d.js" defer></script><script src="/note/assets/js/2.18cea2a3.js" defer></script><script src="/note/assets/js/16.9d49488e.js" defer></script>
  </body>
</html>
