<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>组件 | 技术笔记汇总</title>
    <meta name="description" content="技术笔记汇总">
    <link rel="icon" href="/note/logo.png">
    
    <link rel="preload" href="/note/assets/css/0.styles.723ec28c.css" as="style"><link rel="preload" href="/note/assets/js/app.639aaa1d.js" as="script"><link rel="preload" href="/note/assets/js/2.18cea2a3.js" as="script"><link rel="preload" href="/note/assets/js/106.0a237536.js" as="script"><link rel="prefetch" href="/note/assets/js/10.d74c4aaa.js"><link rel="prefetch" href="/note/assets/js/100.160ef226.js"><link rel="prefetch" href="/note/assets/js/101.d89cfcb4.js"><link rel="prefetch" href="/note/assets/js/102.41543122.js"><link rel="prefetch" href="/note/assets/js/103.f46c5a54.js"><link rel="prefetch" href="/note/assets/js/104.8afda8d0.js"><link rel="prefetch" href="/note/assets/js/105.8b49f398.js"><link rel="prefetch" href="/note/assets/js/107.fd156660.js"><link rel="prefetch" href="/note/assets/js/108.cec707fc.js"><link rel="prefetch" href="/note/assets/js/109.b08fc514.js"><link rel="prefetch" href="/note/assets/js/11.e7bbc63e.js"><link rel="prefetch" href="/note/assets/js/110.999289db.js"><link rel="prefetch" href="/note/assets/js/111.ec825371.js"><link rel="prefetch" href="/note/assets/js/112.63a9fae3.js"><link rel="prefetch" href="/note/assets/js/113.8d88e9c4.js"><link rel="prefetch" href="/note/assets/js/114.45aea35d.js"><link rel="prefetch" href="/note/assets/js/115.1a9e8d50.js"><link rel="prefetch" href="/note/assets/js/116.9e1366fe.js"><link rel="prefetch" href="/note/assets/js/117.aef7b2f8.js"><link rel="prefetch" href="/note/assets/js/118.d0894cfb.js"><link rel="prefetch" href="/note/assets/js/119.6f1a233e.js"><link rel="prefetch" href="/note/assets/js/12.4e2e5b55.js"><link rel="prefetch" href="/note/assets/js/120.9cb76c94.js"><link rel="prefetch" href="/note/assets/js/121.51db0e41.js"><link rel="prefetch" href="/note/assets/js/122.a774b6e0.js"><link rel="prefetch" href="/note/assets/js/123.2495f550.js"><link rel="prefetch" href="/note/assets/js/124.72a5001b.js"><link rel="prefetch" href="/note/assets/js/125.3002453d.js"><link rel="prefetch" href="/note/assets/js/126.a0580de3.js"><link rel="prefetch" href="/note/assets/js/127.b94a348d.js"><link rel="prefetch" href="/note/assets/js/128.19cb69b3.js"><link rel="prefetch" href="/note/assets/js/129.6694712d.js"><link rel="prefetch" href="/note/assets/js/13.bb2d73f3.js"><link rel="prefetch" href="/note/assets/js/130.36726bd4.js"><link rel="prefetch" href="/note/assets/js/131.99855906.js"><link rel="prefetch" href="/note/assets/js/132.a887285f.js"><link rel="prefetch" href="/note/assets/js/133.3331cbc8.js"><link rel="prefetch" href="/note/assets/js/134.50211f20.js"><link rel="prefetch" href="/note/assets/js/135.6db45b06.js"><link rel="prefetch" href="/note/assets/js/136.b6f8c569.js"><link rel="prefetch" href="/note/assets/js/137.32bae06b.js"><link rel="prefetch" href="/note/assets/js/138.9a0c4498.js"><link rel="prefetch" href="/note/assets/js/139.bc89350a.js"><link rel="prefetch" href="/note/assets/js/14.99e459f9.js"><link rel="prefetch" href="/note/assets/js/140.d470778d.js"><link rel="prefetch" href="/note/assets/js/141.0e78c0c6.js"><link rel="prefetch" href="/note/assets/js/142.24fd38c1.js"><link rel="prefetch" href="/note/assets/js/143.6b33397a.js"><link rel="prefetch" href="/note/assets/js/144.e541ff87.js"><link rel="prefetch" href="/note/assets/js/145.dfc7a5d1.js"><link rel="prefetch" href="/note/assets/js/146.b8f4d1c2.js"><link rel="prefetch" href="/note/assets/js/147.2fba978b.js"><link rel="prefetch" href="/note/assets/js/15.ebfb8f45.js"><link rel="prefetch" href="/note/assets/js/16.9d49488e.js"><link rel="prefetch" href="/note/assets/js/17.569ba4d1.js"><link rel="prefetch" href="/note/assets/js/18.c8798bfa.js"><link rel="prefetch" href="/note/assets/js/19.60f574a1.js"><link rel="prefetch" href="/note/assets/js/20.45207a90.js"><link rel="prefetch" href="/note/assets/js/21.a2904a46.js"><link rel="prefetch" href="/note/assets/js/22.efd74e56.js"><link rel="prefetch" href="/note/assets/js/23.126123a5.js"><link rel="prefetch" href="/note/assets/js/24.90d786b5.js"><link rel="prefetch" href="/note/assets/js/25.dfff9848.js"><link rel="prefetch" href="/note/assets/js/26.d4980a90.js"><link rel="prefetch" href="/note/assets/js/27.f265c0a3.js"><link rel="prefetch" href="/note/assets/js/28.0b4655c2.js"><link rel="prefetch" href="/note/assets/js/29.1c841b66.js"><link rel="prefetch" href="/note/assets/js/3.97ea9125.js"><link rel="prefetch" href="/note/assets/js/30.14fb0251.js"><link rel="prefetch" href="/note/assets/js/31.83ecbc44.js"><link rel="prefetch" href="/note/assets/js/32.676ceef2.js"><link rel="prefetch" href="/note/assets/js/33.dd1928f3.js"><link rel="prefetch" href="/note/assets/js/34.e4f8b59e.js"><link rel="prefetch" href="/note/assets/js/35.c34ce175.js"><link rel="prefetch" href="/note/assets/js/36.34ac0299.js"><link rel="prefetch" href="/note/assets/js/37.835c49dc.js"><link rel="prefetch" href="/note/assets/js/38.7b2a15c1.js"><link rel="prefetch" href="/note/assets/js/39.b323af2f.js"><link rel="prefetch" href="/note/assets/js/4.c8fd7a8d.js"><link rel="prefetch" href="/note/assets/js/40.e2a077a4.js"><link rel="prefetch" href="/note/assets/js/41.24bd3142.js"><link rel="prefetch" href="/note/assets/js/42.32054c08.js"><link rel="prefetch" href="/note/assets/js/43.f692f1af.js"><link rel="prefetch" href="/note/assets/js/44.cbafa45a.js"><link rel="prefetch" href="/note/assets/js/45.c4abea6a.js"><link rel="prefetch" href="/note/assets/js/46.1f70a305.js"><link rel="prefetch" href="/note/assets/js/47.5e6582ef.js"><link rel="prefetch" href="/note/assets/js/48.27b2112e.js"><link rel="prefetch" href="/note/assets/js/49.3fc1c54b.js"><link rel="prefetch" href="/note/assets/js/5.e0fe9c1d.js"><link rel="prefetch" href="/note/assets/js/50.f6773725.js"><link rel="prefetch" href="/note/assets/js/51.cb2d49b0.js"><link rel="prefetch" href="/note/assets/js/52.0cb675fa.js"><link rel="prefetch" href="/note/assets/js/53.0a7d1250.js"><link rel="prefetch" href="/note/assets/js/54.a2207b8d.js"><link rel="prefetch" href="/note/assets/js/55.b62860f5.js"><link rel="prefetch" href="/note/assets/js/56.4643e80f.js"><link rel="prefetch" href="/note/assets/js/57.79f29367.js"><link rel="prefetch" href="/note/assets/js/58.499d1cc9.js"><link rel="prefetch" href="/note/assets/js/59.6a110758.js"><link rel="prefetch" href="/note/assets/js/6.26ae280a.js"><link rel="prefetch" href="/note/assets/js/60.220d416e.js"><link rel="prefetch" href="/note/assets/js/61.e6ae8610.js"><link rel="prefetch" href="/note/assets/js/62.450a8b23.js"><link rel="prefetch" href="/note/assets/js/63.238bc8af.js"><link rel="prefetch" href="/note/assets/js/64.c556d7a5.js"><link rel="prefetch" href="/note/assets/js/65.0b2b8f74.js"><link rel="prefetch" href="/note/assets/js/66.8d38ac9a.js"><link rel="prefetch" href="/note/assets/js/67.713c7ae8.js"><link rel="prefetch" href="/note/assets/js/68.9de919ca.js"><link rel="prefetch" href="/note/assets/js/69.2592d868.js"><link rel="prefetch" href="/note/assets/js/7.bb118cfd.js"><link rel="prefetch" href="/note/assets/js/70.0466fd46.js"><link rel="prefetch" href="/note/assets/js/71.a00608d4.js"><link rel="prefetch" href="/note/assets/js/72.1bcabb0f.js"><link rel="prefetch" href="/note/assets/js/73.78366d6d.js"><link rel="prefetch" href="/note/assets/js/74.51084859.js"><link rel="prefetch" href="/note/assets/js/75.85681aa6.js"><link rel="prefetch" href="/note/assets/js/76.c6c9f004.js"><link rel="prefetch" href="/note/assets/js/77.868c406f.js"><link rel="prefetch" href="/note/assets/js/78.bd98c817.js"><link rel="prefetch" href="/note/assets/js/79.823c967e.js"><link rel="prefetch" href="/note/assets/js/8.8d8d5490.js"><link rel="prefetch" href="/note/assets/js/80.7e38de0b.js"><link rel="prefetch" href="/note/assets/js/81.f4ee7ab9.js"><link rel="prefetch" href="/note/assets/js/82.2bddefbf.js"><link rel="prefetch" href="/note/assets/js/83.1ab0c706.js"><link rel="prefetch" href="/note/assets/js/84.e6725b2a.js"><link rel="prefetch" href="/note/assets/js/85.637004f2.js"><link rel="prefetch" href="/note/assets/js/86.df5d585f.js"><link rel="prefetch" href="/note/assets/js/87.6264f320.js"><link rel="prefetch" href="/note/assets/js/88.e54ffe1f.js"><link rel="prefetch" href="/note/assets/js/89.84627f4a.js"><link rel="prefetch" href="/note/assets/js/9.eb9999aa.js"><link rel="prefetch" href="/note/assets/js/90.06375289.js"><link rel="prefetch" href="/note/assets/js/91.baa716db.js"><link rel="prefetch" href="/note/assets/js/92.471de1da.js"><link rel="prefetch" href="/note/assets/js/93.853cd704.js"><link rel="prefetch" href="/note/assets/js/94.9ccee478.js"><link rel="prefetch" href="/note/assets/js/95.6ce9b4cf.js"><link rel="prefetch" href="/note/assets/js/96.75494f51.js"><link rel="prefetch" href="/note/assets/js/97.df197e36.js"><link rel="prefetch" href="/note/assets/js/98.cbab8cf8.js"><link rel="prefetch" href="/note/assets/js/99.906477ea.js">
    <link rel="stylesheet" href="/note/assets/css/0.styles.723ec28c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/note/" class="home-link router-link-active"><!----> <span class="site-name">技术笔记汇总</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">技术笔记</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/base/" class="nav-link">基础</a></li><li class="dropdown-item"><h4>进阶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/typescript/" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/note/regex/" class="nav-link">正则表达式</a></li></ul></li><li class="dropdown-item"><h4>框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/react/" class="nav-link router-link-active">React</a></li><li class="dropdown-subitem"><a href="/note/vue/" class="nav-link">Vue</a></li></ul></li><li class="dropdown-item"><h4>微信开发</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/wx_official_account/" class="nav-link">微信公众号</a></li><li class="dropdown-subitem"><a href="/note/wx_mini_program/" class="nav-link">微信小程序</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端工程</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/sass/" class="nav-link">Sass</a></li><li class="dropdown-item"><!----> <a href="/note/less/" class="nav-link">Less</a></li><li class="dropdown-item"><!----> <a href="/note/gulp/" class="nav-link">Gulp</a></li><li class="dropdown-item"><!----> <a href="/note/npm/" class="nav-link">Npm</a></li><li class="dropdown-item"><!----> <a href="/note/webpack/" class="nav-link">Webpack</a></li><li class="dropdown-item"><!----> <a href="/note/babel/" class="nav-link">Babel</a></li><li class="dropdown-item"><!----> <a href="/note/git/" class="nav-link">Git</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">nodejs开发</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/nodejs/" class="nav-link">NodeJs</a></li><li class="dropdown-item"><!----> <a href="/note/koa2/" class="nav-link">Koa2</a></li><li class="dropdown-item"><!----> <a href="/note/express/" class="nav-link">Express</a></li><li class="dropdown-item"><!----> <a href="/note/mongodb/" class="nav-link">MongoDB</a></li><li class="dropdown-item"><!----> <a href="/note/redis/" class="nav-link">Redis</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">应用框架</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/ant_design_pro/" class="nav-link">Ant Design Pro</a></li><li class="dropdown-item"><!----> <a href="/note/react_native/" class="nav-link">React Native</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/note/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">技术笔记</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/base/" class="nav-link">基础</a></li><li class="dropdown-item"><h4>进阶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/typescript/" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/note/regex/" class="nav-link">正则表达式</a></li></ul></li><li class="dropdown-item"><h4>框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/react/" class="nav-link router-link-active">React</a></li><li class="dropdown-subitem"><a href="/note/vue/" class="nav-link">Vue</a></li></ul></li><li class="dropdown-item"><h4>微信开发</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/wx_official_account/" class="nav-link">微信公众号</a></li><li class="dropdown-subitem"><a href="/note/wx_mini_program/" class="nav-link">微信小程序</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端工程</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/sass/" class="nav-link">Sass</a></li><li class="dropdown-item"><!----> <a href="/note/less/" class="nav-link">Less</a></li><li class="dropdown-item"><!----> <a href="/note/gulp/" class="nav-link">Gulp</a></li><li class="dropdown-item"><!----> <a href="/note/npm/" class="nav-link">Npm</a></li><li class="dropdown-item"><!----> <a href="/note/webpack/" class="nav-link">Webpack</a></li><li class="dropdown-item"><!----> <a href="/note/babel/" class="nav-link">Babel</a></li><li class="dropdown-item"><!----> <a href="/note/git/" class="nav-link">Git</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">nodejs开发</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/nodejs/" class="nav-link">NodeJs</a></li><li class="dropdown-item"><!----> <a href="/note/koa2/" class="nav-link">Koa2</a></li><li class="dropdown-item"><!----> <a href="/note/express/" class="nav-link">Express</a></li><li class="dropdown-item"><!----> <a href="/note/mongodb/" class="nav-link">MongoDB</a></li><li class="dropdown-item"><!----> <a href="/note/redis/" class="nav-link">Redis</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">应用框架</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/ant_design_pro/" class="nav-link">Ant Design Pro</a></li><li class="dropdown-item"><!----> <a href="/note/react_native/" class="nav-link">React Native</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>React</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note/react/basics.html" class="sidebar-link">React基础</a></li><li><a href="/note/react/jsx.html" class="sidebar-link">JSX</a></li><li><a href="/note/react/component.html" class="active sidebar-link">组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/react/component.html#划分状态数据" class="sidebar-link">划分状态数据</a></li><li class="sidebar-sub-header"><a href="/note/react/component.html#无状态组件" class="sidebar-link">无状态组件</a></li><li class="sidebar-sub-header"><a href="/note/react/component.html#组件生命周期" class="sidebar-link">组件生命周期</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/react/component.html#getinitialstate" class="sidebar-link">getInitialState</a></li><li class="sidebar-sub-header"><a href="/note/react/component.html#getdefaultprops" class="sidebar-link">getDefaultProps</a></li><li class="sidebar-sub-header"><a href="/note/react/component.html#render" class="sidebar-link">render</a></li><li class="sidebar-sub-header"><a href="/note/react/component.html#生命周期函数" class="sidebar-link">生命周期函数</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/react/component.html#事件处理" class="sidebar-link">事件处理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/react/component.html#合成事件-和-原生事件" class="sidebar-link">合成事件 和 原生事件</a></li><li class="sidebar-sub-header"><a href="/note/react/component.html#参数传递" class="sidebar-link">参数传递</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/react/component.html#dom-操作" class="sidebar-link">DOM 操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/react/component.html#finddomnode" class="sidebar-link">findDOMNode()</a></li><li class="sidebar-sub-header"><a href="/note/react/component.html#refs" class="sidebar-link">Refs</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/react/component.html#组合组件" class="sidebar-link">组合组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/react/component.html#循环插入子元素" class="sidebar-link">循环插入子元素</a></li><li class="sidebar-sub-header"><a href="/note/react/component.html#this-props-children" class="sidebar-link">this.props.children</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/react/component.html#组件间通信" class="sidebar-link">组件间通信</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/react/component.html#父子组件间通信" class="sidebar-link">父子组件间通信</a></li><li class="sidebar-sub-header"><a href="/note/react/component.html#非父子组件间的通信" class="sidebar-link">非父子组件间的通信</a></li></ul></li></ul></li><li><a href="/note/react/react-router.html" class="sidebar-link">React前端路由</a></li><li><a href="/note/react/redux.html" class="sidebar-link">Redux</a></li><li><a href="/note/react/tools.html" class="sidebar-link">React构建工具</a></li><li><a href="/note/react/higher-order-components.html" class="sidebar-link">React高阶组件</a></li><li><a href="/note/react/other-plugin.html" class="sidebar-link">React插件</a></li><li><a href="/note/react/higher-usage.html" class="sidebar-link">React高级用法</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="组件"><a href="#组件" aria-hidden="true" class="header-anchor">#</a> 组件</h1> <p>一个 React 应用就是构建在 React 组件之上的。</p> <p>组件有两个核心概念：</p> <ul><li>props</li> <li>state</li></ul> <p>一个组件就是通过这两个属性的值在 <code>render</code> 方法里面生成这个组件对应的 HTML 结构。</p> <blockquote><p>注意：组件生成的 HTML 结构只能有一个单一的根节点。</p></blockquote> <table><thead><tr><th>概念</th> <th>##########</th> <th>说明</th></tr></thead> <tbody><tr><td>props</td> <td>props 就是组件的属性</td> <td>由外部通过 JSX 属性传入设置，一旦初始设置完成，就可以认为 this.props 是不可更改的，所以不要轻易更改设置 this.props 里面的值（虽然对于一个 JS 对象你可以做任何事）</td></tr> <tr><td>state</td> <td>state 是组件的当前状态</td> <td>可以把组件简单看成一个“状态机”，根据状态 state 呈现不同的 UI 展示。一旦状态（数据）更改，组件就会自动调用 render 重新渲染 UI，这个更改的动作会通过 this.setState 方法来触发。</td></tr></tbody></table> <h2 id="划分状态数据"><a href="#划分状态数据" aria-hidden="true" class="header-anchor">#</a> 划分状态数据</h2> <div class="tip custom-block"><p>一条原则：让组件尽可能地少状态。（这样组件逻辑就越容易维护。）</p></div> <p>什么样的数据属性可以当作状态？</p> <p>当更改这个状态（数据）需要更新组件 UI 的就可以认为是 state，下面这些可以认为<strong>不是</strong>状态：</p> <ul><li>可计算的数据：比如一个数组的长度</li> <li>和 props 重复的数据：除非这个数据是要做变更的</li></ul> <h2 id="无状态组件"><a href="#无状态组件" aria-hidden="true" class="header-anchor">#</a> 无状态组件</h2> <p>可以用纯粹的函数来定义无状态的组件(stateless function)，这种组件没有状态，没有生命周期，只是简单的接受 props 渲染生成 DOM 结构。无状态组件非常简单，开销很低，如果可能的话尽量使用无状态组件。比如使用箭头函数定义：</p> <div class="language-jsx harmony extra-class"><pre class="language-jsx"><code><span class="token keyword">const</span> <span class="token function-variable function">HelloMessage</span> <span class="token operator">=</span> <span class="token parameter">props</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello </span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">HelloMessage</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>John<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span> mountNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="组件生命周期"><a href="#组件生命周期" aria-hidden="true" class="header-anchor">#</a> 组件生命周期</h2> <p>一般来说，一个组件类由 <code>extends Component</code> 创建，并且提供一个 <code>render</code> 方法以及其他可选的生命周期函数、组件相关的事件或方法来定义。</p> <div class="language-jsx harmony extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> render <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">LikeButton</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      liked<span class="token punctuation">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>liked <span class="token operator">?</span> <span class="token string">'like'</span> <span class="token punctuation">:</span> <span class="token string">'haven\'t liked'</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        You </span><span class="token punctuation">{</span>text<span class="token punctuation">}</span><span class="token plain-text"> this. Click to toggle.
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LikeButton</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div><h3 id="getinitialstate"><a href="#getinitialstate" aria-hidden="true" class="header-anchor">#</a> <code>getInitialState</code></h3> <p>初始化 <code>this.state</code> 的值，只在组件装载之前调用一次。</p> <p>如果是使用 ES6 的语法，你也可以在构造函数中初始化状态，比如：</p> <div class="language-jsx harmony extra-class"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">Counter</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> count<span class="token punctuation">:</span> props<span class="token punctuation">.</span>initialCount <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="getdefaultprops"><a href="#getdefaultprops" aria-hidden="true" class="header-anchor">#</a> <code>getDefaultProps</code></h3> <p>只在组件创建时调用一次并缓存返回的对象（即在 <code>React.createClass</code> 之后就会调用）。</p> <p>因为这个方法在实例初始化之前调用，所以在这个方法里面不能依赖 <code>this</code> 获取到这个组件的实例。</p> <p>在组件装载之后，这个方法缓存的结果会用来保证访问 <code>this.props</code> 的属性时，当这个属性没有在父组件中传入（在这个组件的 JSX 属性里设置），也总是有值的。</p> <p>如果是使用 ES6 语法，可以直接定义 <code>defaultProps</code> 这个类属性来替代，这样能更直观的知道 default props 是预先定义好的对象值：</p> <div class="language-jsx harmony extra-class"><pre class="language-jsx"><code>Counter<span class="token punctuation">.</span>defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span> initialCount<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="render"><a href="#render" aria-hidden="true" class="header-anchor">#</a> <code>render</code></h3> <p>组装生成这个组件的 HTML 结构（使用原生 HTML 标签或者子组件），也可以返回 <code>null</code> 或者 <code>false</code>，这时候 <code>ReactDOM.findDOMNode(this)</code> 会返回 null。</p> <h3 id="生命周期函数"><a href="#生命周期函数" aria-hidden="true" class="header-anchor">#</a> 生命周期函数</h3> <h4 id="装载组件触发"><a href="#装载组件触发" aria-hidden="true" class="header-anchor">#</a> 装载组件触发</h4> <p><code>componentWillMount</code></p> <p>只会在装载之前调用一次，在 <code>render</code> 之前调用，可以在这个方法里调用 <code>setState</code> 改变状态，并且不会导致额外调用一次 <code>render</code>。</p> <p><code>componentDidMount</code></p> <p>只会在装载完成之后调用一次，在 <code>render</code> 之后调用，从这里开始可以通过 <code>ReactDOM.findDOMNode(this)</code> 获取到组件的 DOM 节点。</p> <h4 id="更新组件触发"><a href="#更新组件触发" aria-hidden="true" class="header-anchor">#</a> 更新组件触发</h4> <p>这些方法不会首次 <code>render</code> 组件的周期调用</p> <ul><li>componentWillReceiveProps</li> <li>shouldComponentUpdate</li> <li>componentWillUpdate</li> <li>componentDidUpdate</li></ul> <h4 id="卸载组件触发"><a href="#卸载组件触发" aria-hidden="true" class="header-anchor">#</a> 卸载组件触发</h4> <ul><li>componentWillUnmount</li></ul> <h2 id="事件处理"><a href="#事件处理" aria-hidden="true" class="header-anchor">#</a> 事件处理</h2> <h3 id="合成事件-和-原生事件"><a href="#合成事件-和-原生事件" aria-hidden="true" class="header-anchor">#</a> 合成事件 和 原生事件</h3> <p>React 实现了一个“合成事件”层（synthetic event system），这个事件模型保证了和 W3C 标准保持一致，所以不用担心有什么诡异的用法，并且这个事件层消除了 IE 与 W3C 标准实现之间的兼容问题。</p> <p><strong>“合成事件”还提供了额外的好处：</strong></p> <p>“合成事件”会以事件委托（event delegation）的方式绑定到组件最上层，并且在组件卸载（unmount）的时候自动销毁绑定的事件。</p> <p><strong>什么是“原生事件”？</strong></p> <p>比如你在 <code>componentDidMount</code> 方法里面通过 addEventListener 绑定的事件就是浏览器原生事件。</p> <p>使用原生事件的时候注意在 <code>componentWillUnmount</code> 解除绑定 removeEventListener。</p> <h3 id="参数传递"><a href="#参数传递" aria-hidden="true" class="header-anchor">#</a> 参数传递</h3> <p>给事件处理函数传递额外参数的方式：<code>bind(this, arg1, arg2, ...)</code></p> <div class="language-jsx harmony extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> render <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Dome</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  
  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token parameter">param<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// handle click</span>
  <span class="token punctuation">}</span>
  
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">'extra param'</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Dome</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="dom-操作"><a href="#dom-操作" aria-hidden="true" class="header-anchor">#</a> DOM 操作</h2> <p>大部分情况下你不需要通过查询 DOM 元素去更新组件的 UI，你只要关注设置组件的状态（setState）。但是可能在某些情况下你确实需要直接操作 DOM。</p> <p>首先我们要了解 <code>ReactDOM.render</code> 组件返回的是什么？</p> <p>它会返回对组件的引用也就是组件实例（对于无状态状态组件来说返回 null）</p> <h3 id="finddomnode"><a href="#finddomnode" aria-hidden="true" class="header-anchor">#</a> <code>findDOMNode()</code></h3> <p>当组件加载到页面上之后（mounted），你都可以通过 <code>react-dom</code> 提供的 <code>findDOMNode()</code> 方法拿到组件对应的 DOM 元素。</p> <div class="language-jsx harmony extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> render<span class="token punctuation">,</span> findDOMNode <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Dome</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token comment">// Inside Component class</span>
    <span class="token function">componentDidMound</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> el <span class="token operator">=</span> <span class="token function">findDOMNode</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="refs"><a href="#refs" aria-hidden="true" class="header-anchor">#</a> <code>Refs</code></h3> <p>另外一种方式就是通过在要引用的 DOM 元素上面设置一个 <code>ref</code> 属性指定一个名称，然后通过 <code>this.refs.name</code> 来访问对应的 DOM 元素。</p> <p>比如有一种情况是必须直接操作 DOM 来实现的，你希望一个 <code>&lt;input/&gt;</code> 元素在你清空它的值时 focus，你没法仅仅靠 <code>state</code> 来实现这个功能。</p> <div class="language-jsx harmony extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> userInput<span class="token punctuation">:</span> <span class="token string">''</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
    <span class="token function">handleChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> userInput<span class="token punctuation">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

  <span class="token function">clearAndFocusInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> userInput<span class="token punctuation">:</span> <span class="token string">''</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>refs<span class="token punctuation">.</span>theInput<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">clearAndFocusInput</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          Click to Focus and Reset
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
          <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>theInput<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>userInput<span class="token punctuation">}</span></span>
          <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleChange</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
        <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果 <code>ref</code> 是设置在原生 HTML 元素上，它拿到的就是 DOM 元素，如果设置在自定义组件上，它拿到的就是组件实例，这时候就需要通过 <code>findDOMNode</code> 来拿到组件的 DOM 元素。</p> <p>因为无状态组件没有实例，所以 <code>ref</code> 不能设置在无状态组件上，一般来说这没什么问题，因为无状态组件没有实例方法，不需要 ref 去拿实例调用相关的方法，但是如果想要拿无状态组件的 DOM 元素的时候，就需要用一个状态组件封装一层，然后通过 <code>ref</code> 和 <code>findDOMNode</code> 去获取。</p> <div class="tip custom-block"><ul><li>你可以使用 ref 到的组件定义的任何公共方法，比如 <code>this.refs.myTypeahead.reset()</code></li> <li>Refs 是访问到组件内部 DOM 节点唯一可靠的方法</li> <li>Refs 会自动销毁对子组件的引用（当子组件删除时）</li></ul></div> <div class="warning custom-block"><ul><li>不要在 <code>render</code> 或者 <code>render</code> 之前访问 <code>refs</code></li> <li>不要滥用 <code>refs</code>，比如只是用它来按照传统的方式操作界面 UI：找到 DOM -&gt; 更新 DOM</li></ul></div> <h2 id="组合组件"><a href="#组合组件" aria-hidden="true" class="header-anchor">#</a> 组合组件</h2> <p>使用组件的目的就是通过构建模块化的组件，相互组合组件最后组装成一个复杂的应用。</p> <p>在 React 组件中要包含其他组件作为子组件，只需要把组件当作一个 DOM 元素引入就可以了。</p> <h3 id="循环插入子元素"><a href="#循环插入子元素" aria-hidden="true" class="header-anchor">#</a> 循环插入子元素</h3> <p>如果组件中包含通过循环插入的子元素，为了保证重新渲染 UI 的时候能够正确显示这些子元素，每个元素都需要通过一个特殊的 <code>key</code> 属性指定一个唯一值。为了内部 diff 的效率。</p> <p><code>key</code> 必须直接在循环中设置：</p> <div class="language-jsx harmony extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">ListItemWrapper</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>data<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">MyComponent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>results<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ListItemWrapper</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>result<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span> <span class="token attr-name">data</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>result<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="this-props-children"><a href="#this-props-children" aria-hidden="true" class="header-anchor">#</a> <code>this.props.children</code></h3> <p>组件标签里面包含的子元素会通过 <code>props.children</code> 传递进来。</p> <h2 id="组件间通信"><a href="#组件间通信" aria-hidden="true" class="header-anchor">#</a> 组件间通信</h2> <h3 id="父子组件间通信"><a href="#父子组件间通信" aria-hidden="true" class="header-anchor">#</a> 父子组件间通信</h3> <p>这种情况下很简单，就是通过 <code>props</code> 属性传递，在父组件给子组件设置 <code>props</code>，然后子组件就可以通过 <code>props</code> 访问到父组件的数据／方法，这样就搭建起了父子组件间通信的桥梁。</p> <h3 id="非父子组件间的通信"><a href="#非父子组件间的通信" aria-hidden="true" class="header-anchor">#</a> 非父子组件间的通信</h3> <p>使用全局事件 Pub/Sub 模式，在 <code>componentDidMount</code> 里面订阅事件，在 <code>componentWillUnmount</code> 里面取消订阅，当收到事件触发的时候调用 <code>setState</code> 更新 UI。</p> <p>一般来说，对于比较复杂的应用，推荐使用类似 Flux 这种单项数据流架构。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/note/react/jsx.html" class="prev">JSX</a></span> <span class="next"><a href="/note/react/react-router.html">React前端路由</a>→
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/note/assets/js/app.639aaa1d.js" defer></script><script src="/note/assets/js/2.18cea2a3.js" defer></script><script src="/note/assets/js/106.0a237536.js" defer></script>
  </body>
</html>
